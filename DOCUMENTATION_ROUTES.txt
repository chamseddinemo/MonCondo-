# Documentation ComplÃ¨te des Routes - MonCondo+

**Date de crÃ©ation** : $(date)  
**Version** : 1.0.0  
**Projet** : MonCondo+ - Application de gestion immobiliÃ¨re

---

## ðŸ“‹ Table des matiÃ¨res

1. [Routes Backend API](#routes-backend-api)
2. [Routes Frontend (Pages Next.js)](#routes-frontend-pages-nextjs)
3. [Appels API Frontend](#appels-api-frontend)
4. [LÃ©gende des permissions](#lÃ©gende-des-permissions)

---

## ðŸ”§ Routes Backend API

**Base URL** : `http://localhost:5000/api` (dÃ©veloppement)  
**Production** : Variable d'environnement `NEXT_PUBLIC_API_URL`

---

### 1. ðŸ” Authentification (`/api/auth`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `POST` | `/api/auth/register` | Inscription d'un nouvel utilisateur | âŒ Publique | Tous |
| `POST` | `/api/auth/login` | Connexion (login) | âŒ Publique | Tous |
| `GET` | `/api/auth/me` | Obtenir les informations de l'utilisateur connectÃ© | âœ… Token requis | Tous |
| `POST` | `/api/auth/forgotpassword` | Demander la rÃ©initialisation du mot de passe | âŒ Publique | Tous |
| `PUT` | `/api/auth/resetpassword/:resettoken` | RÃ©initialiser le mot de passe | âŒ Publique (avec token reset) | Tous |
| `PUT` | `/api/auth/updatepassword` | Mettre Ã  jour le mot de passe | âœ… Token requis | Tous |

**Fichier** : `backend/routes/authRoutes.js`

---

### 2. ðŸ‘¥ Utilisateurs (`/api/users`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api/users` | Liste tous les utilisateurs | âœ… Token requis | Admin uniquement |
| `POST` | `/api/users` | CrÃ©er un nouvel utilisateur | âœ… Token requis | Admin uniquement |
| `GET` | `/api/users/:id` | Obtenir un utilisateur par ID | âœ… Token requis | Tous (propre compte ou admin) |
| `PUT` | `/api/users/:id` | Mettre Ã  jour un utilisateur | âœ… Token requis | Tous (propre compte ou admin) |
| `DELETE` | `/api/users/:id` | Supprimer un utilisateur | âœ… Token requis | Admin uniquement |
| `PUT` | `/api/users/:id/promote` | Promouvoir un utilisateur en propriÃ©taire | âœ… Token requis | Admin uniquement |

**Fichier** : `backend/routes/userRoutes.js`

---

### 3. ðŸ¢ Immeubles (`/api/buildings`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api/buildings` | Liste tous les immeubles | âœ… Token requis | Tous (authentifiÃ©s) |
| `POST` | `/api/buildings` | CrÃ©er un nouvel immeuble | âœ… Token requis | Admin uniquement |
| `GET` | `/api/buildings/:id` | Obtenir un immeuble par ID | âœ… Token requis | Tous (authentifiÃ©s) |
| `PUT` | `/api/buildings/:id` | Mettre Ã  jour un immeuble | âœ… Token requis | Admin uniquement |
| `DELETE` | `/api/buildings/:id` | Supprimer un immeuble | âœ… Token requis | Admin uniquement |
| `GET` | `/api/buildings/stats` | Statistiques des immeubles | âœ… Token requis | Admin uniquement |

**Fichier** : `backend/routes/buildingRoutes.js`

---

### 4. ðŸ  UnitÃ©s (`/api/units`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api/units/available` | Liste les unitÃ©s disponibles (publique) | âš ï¸ Optionnelle | Publique (optionnelle) |
| `GET` | `/api/units` | Liste toutes les unitÃ©s | âœ… Token requis | Tous (authentifiÃ©s) |
| `POST` | `/api/units` | CrÃ©er une nouvelle unitÃ© | âœ… Token requis | Admin uniquement |
| `GET` | `/api/units/nouvelles` | Liste les unitÃ©s rÃ©centes | âœ… Token requis | Tous (authentifiÃ©s) |
| `GET` | `/api/units/stats` | Statistiques des unitÃ©s | âœ… Token requis | Admin uniquement |
| `GET` | `/api/units/:id` | Obtenir une unitÃ© par ID | âœ… Token requis | Tous (authentifiÃ©s) |
| `PUT` | `/api/units/:id` | Mettre Ã  jour une unitÃ© | âœ… Token requis | Admin ou propriÃ©taire |
| `DELETE` | `/api/units/:id` | Supprimer une unitÃ© | âœ… Token requis | Admin uniquement |
| `PUT` | `/api/units/:id/assign-owner` | Assigner un propriÃ©taire Ã  une unitÃ© | âœ… Token requis | Admin uniquement |
| `PUT` | `/api/units/:id/assign-tenant` | Assigner un locataire Ã  une unitÃ© | âœ… Token requis | Admin ou propriÃ©taire |
| `PUT` | `/api/units/:id/release` | LibÃ©rer une unitÃ© (retirer locataire) | âœ… Token requis | Admin ou propriÃ©taire |

**Fichier** : `backend/routes/unitRoutes.js`

---

### 5. ðŸ“ Demandes/RequÃªtes (`/api/requests`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api/requests` | Liste toutes les demandes | âœ… Token requis | Tous (filtrÃ©es par utilisateur) |
| `POST` | `/api/requests` | CrÃ©er une nouvelle demande | âœ… Token requis | Tous (authentifiÃ©s) |
| `POST` | `/api/requests/visitor-request` | CrÃ©er une demande visiteur | âœ… Token requis | Tous (authentifiÃ©s) |
| `GET` | `/api/requests/:id` | Obtenir une demande par ID | âœ… Token requis | Tous (propre demande ou admin) |
| `PUT` | `/api/requests/:id` | Mettre Ã  jour une demande | âœ… Token requis | Tous (propre demande ou admin) |
| `DELETE` | `/api/requests/:id` | Supprimer une demande | âœ… Token requis | Tous (propre demande ou admin) |
| `PUT` | `/api/requests/:id/status` | Mettre Ã  jour le statut d'une demande | âœ… Token requis | Admin uniquement |
| `PUT` | `/api/requests/:id/assign` | Assigner une demande Ã  un admin | âœ… Token requis | Admin uniquement |
| `PUT` | `/api/requests/:id/accept` | Accepter une demande | âœ… Token requis | Admin uniquement |
| `PUT` | `/api/requests/:id/reject` | Rejeter une demande | âœ… Token requis | Admin uniquement |
| `POST` | `/api/requests/:id/notes` | Ajouter une note admin Ã  une demande | âœ… Token requis | Admin uniquement |
| `PUT` | `/api/requests/:id/assign-unit` | Assigner une unitÃ© Ã  une demande | âœ… Token requis | Admin uniquement |
| `GET` | `/api/requests/:id/payment-status` | Obtenir le statut du paiement initial | âœ… Token requis | Tous (propre demande ou admin) |
| `POST` | `/api/requests/:id/payment/initiate` | Initier le paiement initial | âœ… Token requis | PropriÃ©taire |
| `PUT` | `/api/requests/:id/payment/validate` | Valider un paiement initial | âœ… Token requis | Admin uniquement |
| `PUT` | `/api/requests/:id/documents/:docId/sign` | Signer un document | âœ… Token requis | Tous (propre demande) |
| `GET` | `/api/requests/:id/documents/:docId/download` | TÃ©lÃ©charger un document | âœ… Token requis | Tous (propre demande ou admin) |

**Fichier** : `backend/routes/requestRoutes.js`

---

### 6. ðŸ’° Paiements (`/api/payments`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api/payments` | Liste tous les paiements | âœ… Token requis | Tous (filtrÃ©s par utilisateur) |
| `POST` | `/api/payments` | CrÃ©er un nouveau paiement | âœ… Token requis | Admin, PropriÃ©taire, Locataire |
| `GET` | `/api/payments/:id` | Obtenir un paiement par ID | âœ… Token requis | Tous (propre paiement ou admin) |
| `PUT` | `/api/payments/:id` | Mettre Ã  jour un paiement | âœ… Token requis | Admin uniquement |
| `DELETE` | `/api/payments/:id` | Supprimer un paiement | âœ… Token requis | Admin uniquement |
| `POST` | `/api/payments/:id/process` | Traiter un paiement | âœ… Token requis | Tous (propre paiement ou admin) |
| `POST` | `/api/payments/:id/stripe/create-intent` | CrÃ©er une intention Stripe | âœ… Token requis | Tous (propre paiement) |
| `POST` | `/api/payments/:id/stripe/confirm` | Confirmer un paiement Stripe | âœ… Token requis | Tous (propre paiement) |
| `POST` | `/api/payments/:id/interac/instructions` | CrÃ©er des instructions Interac | âœ… Token requis | Tous (propre paiement) |
| `POST` | `/api/payments/:id/bank-transfer/instructions` | CrÃ©er des instructions virement bancaire | âœ… Token requis | Tous (propre paiement) |
| `GET` | `/api/payments/:id/receipt` | GÃ©nÃ©rer un reÃ§u | âœ… Token requis | Tous (propre paiement ou admin) |
| `GET` | `/api/payments/stats` | Statistiques des paiements | âœ… Token requis | Tous (filtrÃ©es par utilisateur) |
| `GET` | `/api/payments/next-due` | Prochain paiement dÃ» (locataire) | âœ… Token requis | Locataire |
| `GET` | `/api/payments/overdue/all` | Liste tous les paiements en retard | âœ… Token requis | Admin uniquement |
| `GET` | `/api/payments/report/pdf` | GÃ©nÃ©rer un rapport PDF | âœ… Token requis | Admin uniquement |
| `GET` | `/api/payments/report/excel` | GÃ©nÃ©rer un rapport Excel | âœ… Token requis | Admin uniquement |

**Fichier** : `backend/routes/paymentRoutes.js`

---

### 7. ðŸ’¬ Messages (`/api/messages`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api/messages` | Liste tous les messages | âœ… Token requis | Tous (authentifiÃ©s) |
| `POST` | `/api/messages` | CrÃ©er un nouveau message | âœ… Token requis | Tous (authentifiÃ©s) |
| `GET` | `/api/messages/unread` | Liste les messages non lus | âœ… Token requis | Tous (authentifiÃ©s) |
| `GET` | `/api/messages/unread/count` | Compter les messages non lus | âœ… Token requis | Tous (authentifiÃ©s) |
| `GET` | `/api/messages/conversation/:userId` | Obtenir une conversation avec un utilisateur | âœ… Token requis | Tous (authentifiÃ©s) |
| `GET` | `/api/messages/:id` | Obtenir un message par ID | âœ… Token requis | Tous (authentifiÃ©s) |
| `PUT` | `/api/messages/:id` | Mettre Ã  jour un message | âœ… Token requis | Tous (propre message ou admin) |
| `DELETE` | `/api/messages/:id` | Supprimer un message | âœ… Token requis | Tous (propre message ou admin) |
| `PUT` | `/api/messages/:id/read` | Marquer un message comme lu | âœ… Token requis | Tous (authentifiÃ©s) |

**Fichier** : `backend/routes/messageRoutes.js`

---

### 8. ðŸ“„ Documents (`/api/documents`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api/documents` | Liste tous les documents | âœ… Token requis | Tous (filtrÃ©s par utilisateur) |
| `POST` | `/api/documents` | Uploader un document | âœ… Token requis | Tous (authentifiÃ©s) |
| `GET` | `/api/documents/:id` | Obtenir un document par ID | âœ… Token requis | Tous (propre document ou admin) |
| `PUT` | `/api/documents/:id` | Mettre Ã  jour un document | âœ… Token requis | Tous (propre document ou admin) |
| `DELETE` | `/api/documents/:id` | Supprimer un document | âœ… Token requis | Tous (propre document ou admin) |
| `GET` | `/api/documents/:id/download` | TÃ©lÃ©charger un document | âœ… Token requis | Tous (propre document ou admin) |

**Fichier** : `backend/routes/documentRoutes.js`

---

### 9. ðŸ”” Notifications (`/api/notifications`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api/notifications` | Liste toutes les notifications | âœ… Token requis | Tous (filtrÃ©es par utilisateur) |
| `GET` | `/api/notifications/export/:format` | Exporter l'historique des notifications | âœ… Token requis | Tous (authentifiÃ©s) |
| `PATCH` | `/api/notifications/read/all` | Marquer toutes les notifications comme lues | âœ… Token requis | Tous (authentifiÃ©s) |
| `PATCH` | `/api/notifications/read/:id` | Marquer une notification comme lue | âœ… Token requis | Tous (authentifiÃ©s) |
| `DELETE` | `/api/notifications/:id` | Supprimer une notification | âœ… Token requis | Tous (authentifiÃ©s) |

**Fichier** : `backend/routes/notificationRoutes.js`

---

### 10. ðŸ’¬ Conversations (`/api/conversations`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api/conversations` | Liste toutes les conversations | âœ… Token requis | Tous (authentifiÃ©s) |
| `GET` | `/api/conversations/:id` | Obtenir une conversation par ID | âœ… Token requis | Tous (authentifiÃ©s) |
| `GET` | `/api/conversations/contacts` | Liste les contacts | âœ… Token requis | Tous (authentifiÃ©s) |
| `GET` | `/api/conversations/:id/messages` | Obtenir les messages d'une conversation | âœ… Token requis | Tous (authentifiÃ©s) |
| `POST` | `/api/conversations/direct` | CrÃ©er ou obtenir une conversation directe | âœ… Token requis | Tous (authentifiÃ©s) |
| `POST` | `/api/conversations/unit` | CrÃ©er une conversation liÃ©e Ã  une unitÃ© | âœ… Token requis | Tous (authentifiÃ©s) |
| `PUT` | `/api/conversations/:id/archive` | Archiver une conversation | âœ… Token requis | Tous (authentifiÃ©s) |

**Fichier** : `backend/routes/conversationRoutes.js`

---

### 11. ðŸ“¤ Upload (`/api/upload`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `POST` | `/api/upload/messages` | Uploader des fichiers pour les messages | âœ… Token requis | Tous (authentifiÃ©s) |

**Fichier** : `backend/routes/uploadRoutes.js`

---

### 12. ðŸ“Š Tableau de bord (`/api/dashboard`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api/dashboard/admin/dashboard` | Dashboard admin | âœ… Token requis | Admin uniquement |
| `GET` | `/api/dashboard/admin/users` | Liste des utilisateurs (admin) | âœ… Token requis | Admin uniquement |
| `GET` | `/api/dashboard/admin/stats` | Statistiques globales (admin) | âœ… Token requis | Admin uniquement |
| `GET` | `/api/dashboard/proprietaire/dashboard` | Dashboard propriÃ©taire | âœ… Token requis | PropriÃ©taire uniquement |
| `GET` | `/api/dashboard/proprietaire/my-units` | Mes unitÃ©s (propriÃ©taire) | âœ… Token requis | PropriÃ©taire uniquement |
| `GET` | `/api/dashboard/locataire/dashboard` | Dashboard locataire | âœ… Token requis | Locataire uniquement |
| `GET` | `/api/dashboard/locataire/my-unit` | Mon unitÃ© (locataire) | âœ… Token requis | Locataire uniquement |
| `GET` | `/api/dashboard/dashboard` | Dashboard gÃ©nÃ©ral | âœ… Token requis | Admin, PropriÃ©taire, Locataire |
| `GET` | `/api/dashboard/me` | Informations utilisateur actuel | âœ… Token requis | Tous (authentifiÃ©s) |

**Fichier** : `backend/routes/dashboardRoutes.js`

---

### 13. ðŸ  API principale (`/api`)

| MÃ©thode | Route | Description | Authentification | RÃ´les |
|---------|-------|-------------|------------------|-------|
| `GET` | `/api` | Page d'accueil de l'API | âŒ Publique | Tous |
| `GET` | `/api/health` | Health check du serveur | âŒ Publique | Tous |

**Fichier** : `backend/routes/index.js`, `backend/server.js`

---

## ðŸ–¥ï¸ Routes Frontend (Pages Next.js)

**Base URL** : `http://localhost:3000` (dÃ©veloppement)

---

### Pages Publiques

| Route | Page | Description | Composant |
|-------|------|-------------|-----------|
| `/` | Accueil | Page d'accueil publique | `pages/index.tsx` |
| `/login` | Connexion | Page de connexion | `pages/login.tsx` |
| `/404` | Erreur 404 | Page d'erreur 404 | `pages/404.tsx` |
| `/unauthorized` | Non autorisÃ© | Page d'accÃ¨s non autorisÃ© | `pages/unauthorized.tsx` |
| `/contact` | Contact | Page de contact | `pages/contact.tsx` |
| `/services` | Services | Page des services | `pages/services.tsx` |
| `/community` | CommunautÃ© | Page communautÃ© | `pages/community.tsx` |
| `/maintenance` | Maintenance | Page maintenance | `pages/maintenance.tsx` |

---

### Pages Admin

| Route | Page | Description | Composant | RÃ´le requis |
|-------|------|-------------|-----------|-------------|
| `/admin/dashboard` | Dashboard Admin | Tableau de bord administrateur | `pages/dashboard/admin.tsx` | Admin |
| `/admin/buildings` | Gestion Immeubles | Gestion des immeubles | `pages/admin/buildings.tsx` | Admin |
| `/admin/units` | Gestion UnitÃ©s | Gestion des unitÃ©s | `pages/admin/units.tsx` | Admin |
| `/admin/users` | Gestion Utilisateurs | Gestion des utilisateurs | `pages/admin/users.tsx` | Admin |
| `/admin/requests` | Gestion Demandes | Gestion des demandes | `pages/admin/requests.tsx` | Admin |
| `/admin/requests/[id]` | DÃ©tails Demande Admin | DÃ©tails d'une demande (admin) | `pages/admin/requests/[id].tsx` | Admin |
| `/admin/requests/[id]/edit` | Ã‰diter Demande Admin | Ã‰diter une demande (admin) | `pages/admin/requests/[id]/edit.tsx` | Admin |

---

### Pages PropriÃ©taire

| Route | Page | Description | Composant | RÃ´le requis |
|-------|------|-------------|-----------|-------------|
| `/dashboard/proprietaire` | Dashboard PropriÃ©taire | Tableau de bord propriÃ©taire | `pages/dashboard/proprietaire.tsx` | PropriÃ©taire |
| `/proprietaire/mes-unites` | Mes UnitÃ©s | Liste des unitÃ©s du propriÃ©taire | `pages/proprietaire/mes-unites.tsx` | PropriÃ©taire |
| `/proprietaire/consult-units` | Consulter UnitÃ©s | Consulter les unitÃ©s | `pages/proprietaire/consult-units.tsx` | PropriÃ©taire |
| `/proprietaire/services` | Services PropriÃ©taire | Services pour propriÃ©taire | `pages/proprietaire/services.tsx` | PropriÃ©taire |
| `/proprietaire/requests/[id]` | DÃ©tails Demande PropriÃ©taire | DÃ©tails d'une demande | `pages/proprietaire/requests/[id].tsx` | PropriÃ©taire |

---

### Pages Locataire

| Route | Page | Description | Composant | RÃ´le requis |
|-------|------|-------------|-----------|-------------|
| `/dashboard/locataire` | Dashboard Locataire | Tableau de bord locataire | `pages/dashboard/locataire.tsx` | Locataire |
| `/locataire/services` | Services Locataire | Services pour locataire | `pages/locataire/services.tsx` | Locataire |
| `/locataire/profile` | Profil Locataire | Profil du locataire | `pages/locataire/profile.tsx` | Locataire |
| `/locataire/settings` | ParamÃ¨tres Locataire | ParamÃ¨tres du locataire | `pages/locataire/settings.tsx` | Locataire |
| `/locataire/requests/[id]` | DÃ©tails Demande Locataire | DÃ©tails d'une demande | `pages/locataire/requests/[id].tsx` | Locataire |

---

### Pages Communes (Multi-rÃ´les)

| Route | Page | Description | Composant | RÃ´le requis |
|-------|------|-------------|-----------|-------------|
| `/dashboard` | Dashboard GÃ©nÃ©ral | Dashboard gÃ©nÃ©ral (redirige selon rÃ´le) | `pages/dashboard/index.tsx` | Tous |
| `/dashboard/admin` | Dashboard Admin (alias) | Alias vers dashboard admin | `pages/dashboard/admin.tsx` | Admin |
| `/units` | UnitÃ©s | Liste des unitÃ©s disponibles | `pages/units.tsx` | Tous (authentifiÃ©s) |
| `/units/[id]` | DÃ©tails UnitÃ© | DÃ©tails d'une unitÃ© | `pages/units/[id].tsx` | Tous (authentifiÃ©s) |
| `/buildings` | Immeubles (redirect) | Redirige vers `/admin/buildings` | `pages/buildings.tsx` | Admin |
| `/buildings/[id]` | DÃ©tails Immeuble | DÃ©tails d'un immeuble | `pages/buildings/[id].tsx` | Tous (authentifiÃ©s) |
| `/buildings/[id]/edit` | Ã‰diter Immeuble | Ã‰diter un immeuble | `pages/buildings/[id]/edit.tsx` | Admin |
| `/documents` | Documents | Gestion des documents | `pages/documents.tsx` | Tous (authentifiÃ©s) |
| `/messages` | Messages | Messagerie | `pages/messages.tsx` | Tous (authentifiÃ©s) |
| `/notifications` | Notifications | Centre de notifications | `pages/notifications.tsx` | Tous (authentifiÃ©s) |
| `/request` | Nouvelle Demande | CrÃ©er une nouvelle demande | `pages/request.tsx` | Tous (authentifiÃ©s) |
| `/analytics` | Analytics | Statistiques et analyses | `pages/analytics.tsx` | Tous (authentifiÃ©s) |

---

### Pages Paiements

| Route | Page | Description | Composant | RÃ´le requis |
|-------|------|-------------|-----------|-------------|
| `/payments` | Paiements | Liste des paiements | `pages/payments/index.tsx` | Tous (authentifiÃ©s) |
| `/payments/admin` | Paiements Admin | Gestion des paiements (admin) | `pages/payments/admin.tsx` | Admin |
| `/payments/proprietaire` | Paiements PropriÃ©taire | Paiements reÃ§us (propriÃ©taire) | `pages/payments/proprietaire.tsx` | PropriÃ©taire |
| `/payments/locataire` | Paiements Locataire | Mes paiements (locataire) | `pages/payments/locataire.tsx` | Locataire |
| `/payments/new` | Nouveau Paiement | CrÃ©er un nouveau paiement | `pages/payments/new.tsx` | Tous (authentifiÃ©s) |
| `/payments/[id]` | DÃ©tails Paiement | DÃ©tails d'un paiement | `pages/payments/[id].tsx` | Tous (authentifiÃ©s) |
| `/payments/[id]/pay` | Payer | Page de paiement | `pages/payments/[id]/pay.tsx` | Tous (authentifiÃ©s) |
| `/payments/[id]/success` | SuccÃ¨s Paiement | Confirmation de paiement | `pages/payments/[id]/success.tsx` | Tous (authentifiÃ©s) |

---

## ðŸ”Œ Appels API Frontend

### Services et Hooks

#### `frontend/services/realEstateService.ts`
- `getAllBuildings()` â†’ `GET /api/buildings`
- `getBuilding(id)` â†’ `GET /api/buildings/:id`
- `getAllUnits()` â†’ `GET /api/units`
- `getUnit(id)` â†’ `GET /api/units/:id`
- `getAvailableUnits()` â†’ `GET /api/units/available`
- `getGlobalStats()` â†’ `GET /api/dashboard/admin/stats`
- `getUnitsStats()` â†’ `GET /api/units/stats`
- `getBuildingsStats()` â†’ `GET /api/buildings/stats`

#### `frontend/hooks/useGlobalStats.ts`
- Utilise `GET /api/dashboard/admin/stats` pour les statistiques globales

#### `frontend/hooks/useRealEstateData.ts`
- Utilise `realEstateService` pour charger toutes les donnÃ©es immobiliÃ¨res

#### `frontend/utils/axiosInstances.ts`
- **`authenticatedAxios`** : Instance axios avec token automatique
  - Base URL : `http://localhost:5000/api`
  - Ajoute automatiquement `Authorization: Bearer <token>`
  - GÃ¨re les erreurs 401 (redirection vers login)

- **`publicAxios`** : Instance axios sans authentification
  - Base URL : `http://localhost:5000/api`
  - UtilisÃ© pour les routes publiques

---

## ðŸ“ LÃ©gende des permissions

| Symbole | Signification |
|---------|---------------|
| âœ… Token requis | Route protÃ©gÃ©e nÃ©cessitant un token JWT |
| âŒ Publique | Route accessible sans authentification |
| âš ï¸ Optionnelle | Route accessible sans token, mais utilise le token si disponible |
| Admin uniquement | Route accessible uniquement aux administrateurs |
| PropriÃ©taire uniquement | Route accessible uniquement aux propriÃ©taires |
| Locataire uniquement | Route accessible uniquement aux locataires |
| Tous (authentifiÃ©s) | Route accessible Ã  tous les utilisateurs connectÃ©s |
| Tous (filtrÃ©es) | Route accessible Ã  tous, mais les rÃ©sultats sont filtrÃ©s par utilisateur |

---

## ðŸ“Œ Notes importantes

1. **Ordre des routes** : L'ordre de montage des routes dans `server.js` est critique. Les routes spÃ©cifiques doivent Ãªtre dÃ©finies avant les routes gÃ©nÃ©riques (`/:id`).

2. **Authentification** : Toutes les routes protÃ©gÃ©es utilisent le middleware `protect` qui vÃ©rifie la validitÃ© du token JWT.

3. **Autorisation** : Les routes avec restriction de rÃ´le utilisent le middleware `roleAuth('role1', 'role2', ...)`.

4. **CORS** : Les routes backend acceptent les requÃªtes depuis `http://localhost:3000` et `http://localhost:3001`.

5. **Socket.io** : Les routes `buildings` Ã©mettent des Ã©vÃ©nements Socket.io lors des mises Ã  jour (`building:updated`, `unit:updated`, `stats:updated`).

6. **Upload** : Les routes d'upload utilisent le middleware `upload` (Multer) pour gÃ©rer les fichiers.

7. **Health Check** : La route `/api/health` est utilisÃ©e pour vÃ©rifier que le backend est opÃ©rationnel.

---

## ðŸ“š Fichiers de configuration

- **Backend** : `backend/server.js` - Montage de toutes les routes
- **Frontend** : `frontend/utils/axiosInstances.ts` - Configuration des instances axios
- **Frontend** : `frontend/services/realEstateService.ts` - Service centralisÃ© pour les donnÃ©es immobiliÃ¨res

---

**Document gÃ©nÃ©rÃ© automatiquement**  
**DerniÃ¨re mise Ã  jour** : $(date)

